!function(){var Tools={getRandom:function(min,max){return Math.floor(Math.random()*(max-min))+min}};window.Tools=Tools}(),function(){var elements=[];function Food(options){options=options||{},this.x=options.x||0,this.y=options.y||0,this.width=options.width||20,this.height=options.height||20,this.color=options.color||"#7bbf0f"}function remove(){for(var i=elements.length-1;i>=0;i--)elements[i].parentNode.removeChild(elements[i]),elements.splice(i,1)}Food.prototype.render=function(map){remove(),this.x=Tools.getRandom(0,map.offsetWidth/this.width)*this.width,this.y=Tools.getRandom(0,map.offsetHeight/this.height)*this.height;var div=document.createElement("div");map.appendChild(div),elements.push(div),div.style.position="absolute",div.style.left=this.x+"px",div.style.top=this.y+"px",div.style.width=this.width+"px",div.style.height=this.height+"px",div.style.backgroundColor=this.color,div.style.borderRadius="50%"},window.Food=Food}(),function(){var elements=[];function Snake(options){options=options||{},this.width=options.width||20,this.height=options.height||20,this.direction=options.direction||"right",this.body=[{x:3,y:2,color:"red"},{x:2,y:2,color:"navy"},{x:1,y:2,color:"navy"}]}function remove(){for(var i=elements.length-1;i>=0;i--)elements[i].parentNode.removeChild(elements[i]),elements.splice(i,1)}Snake.prototype.render=function(map){remove();for(var i=0,len=this.body.length;i<len;i++){var object=this.body[i],div=document.createElement("div");map.appendChild(div),elements.push(div),div.style.position="absolute",div.style.width=this.width+"px",div.style.height=this.height+"px",div.style.top=object.y*this.height+"px",div.style.left=object.x*this.width+"px",div.style.backgroundColor=object.color}},Snake.prototype.move=function(food,map){for(var i=this.body.length-1;i>0;i--)this.body[i].x=this.body[i-1].x,this.body[i].y=this.body[i-1].y;var head=this.body[0];switch(this.direction){case"right":head.x+=1;break;case"left":head.x-=1;break;case"up":head.y-=1;break;case"down":head.y+=1}var headX=head.x*this.width,headY=head.y*this.height;if(headX==food.x&&headY==food.y){food.render(map);var last=this.body[this.body.length-1];this.body.push({x:last.x,y:last.y,color:last.color})}},window.Snake=Snake}(),function(){var that;function Game(map){this.food=new Food,this.snake=new Snake,this.map=map,this.forbiddenKey="ArrowLeft",that=this}function bindKey(){document.addEventListener("keydown",function(e){switch(e.key){case this.forbiddenKey:break;case"ArrowUp":this.snake.direction="up",this.forbiddenKey="ArrowDown";break;case"ArrowDown":this.snake.direction="down",this.forbiddenKey="ArrowUp";break;case"ArrowLeft":this.snake.direction="left",this.forbiddenKey="ArrowRight";break;case"ArrowRight":this.snake.direction="right",this.forbiddenKey="ArrowLeft"}}.bind(that),!1)}function runSnake(){var timerId=setInterval(function(){var maxX=this.map.offsetWidth/this.snake.width,maxY=this.map.offsetHeight/this.snake.height,headX=this.snake.body[0].x,headY=this.snake.body[0].y;headX<0||headY<0||headX>=maxX||headY>=maxY?(clearInterval(timerId),alert("Game Over")):(this.snake.move(this.food,this.map),this.snake.render(this.map))}.bind(that),200)}Game.prototype.start=function(){this.food.render(this.map),this.snake.render(this.map),runSnake(),bindKey()},window.Game=Game}(),function(){var map=document.getElementById("map"),game;new Game(map).start()}();